# Форматы файлов и стратегия обработки

## 1. Общий паттерн
Создать `IFileHandler`:
- `bool CanHandle(string extension)`
- `Task<string> ExtractTextAsync(string path)`
- `Task<string> BuildOutputAsync(string path, string translatedText, string outputPath)`

Регистрация обработчиков через DI позволяет легко добавлять новые форматы.

## 2. Поддерживаемые форматы
### 2.1 TXT / MD
- Чтение: `File.ReadAllText`.
- Вывод: сохранение текста в указанный путь с тем же расширением.

### 2.2 PDF
- Чтение: бесплатная библиотека (например, PdfPig).
- Вывод: как TXT или MD по умолчанию, либо PDF с базовой разметкой.
- Для больших PDF — постраничная обработка.

### 2.3 DOCX
- Чтение: `DocumentFormat.OpenXml` (OpenXML SDK).
- Вывод: DOCX с сохранением минимальной структуры.

### 2.4 ODT
- Чтение: свободная библиотека (например, OdfSharp/AODL).
- Вывод: ODT либо TXT, в зависимости от доступности API.

### 2.5 Изображения (PNG, JPEG, TIFF)
- Передавать в LLM как base64 (если поддержка vision).
- Результат сохранять в TXT/MD с распознанным текстом.

## 3. Ограничения и размер
- Для больших файлов — предупреждать и оценивать время.
- Добавить лимит по размеру (например, 20-50 MB) и настраиваемое подтверждение.

